$schema: http://json-schema.org/draft-07/schema#
title: Particles AST Node
description: Schema for particles AST after parsing
type: object
required:
  - id
  - type
properties:
  id:
    type: string
    description: Unique identifier

  type:
    const: particles
    description: Element type

  preset:
    type: string
    enum: [snow, rain, fire, burst, explosion]
    description: Built-in preset name (if used)

  count:
    type: number
    description: Max particles count
    default: 100

  texture:
    oneOf:
      - type: string
        description: Texture name (built-in or asset alias)
      - type: object
        description: Custom texture configuration
        required:
          - shape
        properties:
          shape:
            type: string
            enum: [circle, ellipse, rect]
          radius:
            type: number
          width:
            type: number
          height:
            type: number
          color:
            type: string

  behaviors:
    type: array
    description: Behavior configurations to add/override
    items:
      type: object
      required:
        - type
      properties:
        type:
          type: string
        config:
          type: object

  disableBehaviors:
    type: array
    description: Behavior types to disable from preset
    items:
      type: string

  emitter:
    type: object
    description: Emitter configuration overrides
    properties:
      lifetime:
        type: object
        properties:
          min:
            type: number
          max:
            type: number
      frequency:
        type: number
      particlesPerWave:
        type: number
      maxParticles:
        type: number
      emitterLifetime:
        type: number
      spawnBounds:
        type: object
        properties:
          x:
            type: number
          y:
            type: number
          width:
            type: number
          height:
            type: number
      recycleOnBounds:
        type: boolean
      seed:
        type: number
        description: Seed for deterministic randomness (for visual testing)

  x:
    type: number
    description: Container X position
    default: 0

  y:
    type: number
    description: Container Y position
    default: 0

  width:
    type: number
    description: Effect area width

  height:
    type: number
    description: Effect area height

  emitX:
    type: number
    description: Emission point X

  emitY:
    type: number
    description: Emission point Y

  alpha:
    type: number
    description: Container opacity
    minimum: 0
    maximum: 1
    default: 1
