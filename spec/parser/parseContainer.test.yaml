file: '../../src/plugins/elements/container/parseContainerForTestingPurposes.js'
group: parser
suites: [parseContainer]
---
suite: parseContainerForTesting
exportName: parseContainerForTesting
---
case: Test parsing container with no width or height horizontally
in:
  - state:
      id: 'container-1'
      type: "container"
      direction: "horizontal"
      gap: 5
      x: 240
      y: 240
      anchorX: 0.5
      anchorY: 0.5
      rotation: 90
      children:
        - id: 'rect-1'
          type: "rect"
          width: 80
          height: 100
          scaleX: 1.2
          scaleY: 0.8
          fill: red
          rotation: 90
        - id: 'rect-2'
          type: "rect"
          width: 100
          height: 120
          scaleX: 1.2
          scaleY: 0.8
          fill: blue
          rotation: 90
        - id: 'rect-3'
          type: "rect"
          width: 80
          height: 100
          scaleX: 1.2
          scaleY: 0.8
          fill: red
          rotation: 90
out:
  id: "container-1"
  type: "container"
  direction: "horizontal"
  gap: 5
  width: 322
  height: 96
  x: 79
  y: 192
  originX: 161
  originY: 48
  scroll: false
  rotation: 90
  alpha: 1
  children:
    - id: 'rect-1'
      type: "rect"
      width: 96
      height: 80
      x: 0
      y: 0
      originX: 0
      originY: 0
      fill: red
      rotation: 90
      alpha: 1
    - id: 'rect-2'
      type: "rect"
      width: 120
      height: 96
      x: 101
      y: 0
      originX: 0
      originY: 0
      fill: blue
      rotation: 90
      alpha: 1
    - id: 'rect-3'
      type: "rect"
      width: 96
      height: 80
      x: 226
      y: 0
      originX: 0
      originY: 0
      fill: red
      rotation: 90
      alpha: 1
---
case: Test parsing container with no width or height vertically
in:
  - state:
      id: 'container-1'
      type: "container"
      direction: "vertical"
      gap: 5
      x: 240
      y: 240
      anchorX: 0.5
      anchorY: 0.5
      rotation: 90
      children:
        - id: 'rect-1'
          type: "rect"
          width: 80
          height: 100
          scaleX: 1.2
          scaleY: 0.8
          fill: red
          rotation: 90
        - id: 'rect-2'
          type: "rect"
          width: 100
          height: 120
          x: 240
          y: 240
          fill: blue
          rotation: 90
        - id: 'rect-3'
          type: "rect"
          width: 80
          height: 100
          x: 240
          y: 240
          fill: red
          rotation: 90
out:
  id: "container-1"
  type: "container"
  direction: "vertical"
  gap: 5
  width: 100
  height: 310
  x: 190
  y: 85
  originX: 50
  originY: 155
  scroll: false
  rotation: 90
  alpha: 1
  children:
    - id: 'rect-1'
      type: "rect"
      width: 96
      height: 80
      x: 0
      y: 0
      originX: 0
      originY: 0
      fill: red
      rotation: 90
      alpha: 1
    - id: 'rect-2'
      type: "rect"
      width: 100
      height: 120
      x: 0
      y: 85
      originX: 0
      originY: 0
      fill: blue
      rotation: 90
      alpha: 1
    - id: 'rect-3'
      type: "rect"
      width: 80
      height: 100
      x: 0
      y: 210
      originX: 0
      originY: 0
      fill: red
      rotation: 90
      alpha: 1
---
case: Test parsing container with no width or height and width overflow-horizontal
in:
  - state:
      id: 'container-1'
      type: "container"
      direction: "horizontal"
      width: 200
      gap: 5
      x: 240
      y: 240
      anchorX: 0.5
      anchorY: 0.5
      rotation: 90
      children:
        - id: 'rect-1'
          type: "rect"
          width: 80
          height: 100
          scaleX: 1.2
          scaleY: 0.8
          fill: red
          rotation: 90
        - id: 'rect-2'
          type: "rect"
          width: 100
          height: 120
          scaleX: 1.2
          scaleY: 0.8
          fill: blue
          rotation: 90
out:
  id: "container-1"
  type: "container"
  direction: "horizontal"
  gap: 5
  width: 200
  height: 181
  x: 140
  y: 150
  originX: 100
  originY: 91
  scroll: false
  rotation: 90
  alpha: 1
  children:
    - id: 'rect-1'
      type: "rect"
      width: 96
      height: 80
      x: 0
      y: 0
      originX: 0
      originY: 0
      fill: red
      rotation: 90
      alpha: 1
    - id: 'rect-2'
      type: "rect"
      width: 120
      height: 96
      x: 0
      y: 85
      originX: 0
      originY: 0
      fill: blue
      rotation: 90
      alpha: 1
---
case: Test parsing container with no width or height and width overflow-vertical
in:
  - state:
      id: 'container-1'
      type: "container"
      direction: "vertical"
      height: 200
      gap: 5
      x: 240
      y: 240
      anchorX: 0.5
      anchorY: 0.5
      rotation: 90
      children:
        - id: 'rect-1'
          type: "rect"
          width: 80
          height: 100
          scaleX: 1.2
          scaleY: 0.8
          fill: red
          rotation: 90
        - id: 'rect-2'
          type: "rect"
          width: 100
          height: 120
          scaleX: 1.2
          scaleY: 0.8
          fill: blue
          rotation: 90
        - id: 'rect-3'
          type: "rect"
          width: 100
          height: 120
          scaleX: 1.2
          scaleY: 0.8
          fill: blue
          rotation: 90
out:
  id: "container-1"
  type: "container"
  direction: "vertical"
  gap: 5
  width: 245
  height: 200
  x: 118
  y: 140
  originX: 123
  originY: 100
  scroll: false
  rotation: 90
  alpha: 1
  children:
    - id: 'rect-1'
      type: "rect"
      width: 96
      height: 80
      x: 0
      y: 0
      originX: 0
      originY: 0
      fill: red
      rotation: 90
      alpha: 1
    - id: 'rect-2'
      type: "rect"
      width: 120
      height: 96
      x: 0
      y: 85
      originX: 0
      originY: 0
      fill: blue
      rotation: 90
      alpha: 1
    - id: 'rect-3'
      type: "rect"
      width: 120
      height: 96
      x: 125
      y: 0
      originX: 0
      originY: 0
      fill: blue
      rotation: 90
      alpha: 1
---
case: Test parsing empty container
in:
  - state:
      id: 'container-1'
      type: "container"
      direction: "vertical"
      gap: 5
      x: 240
      y: 240
      anchorX: 0.5
      anchorY: 0.5
      rotation: 90
out:
  id: "container-1"
  type: "container"
  direction: "vertical"
  gap: 5
  width: 0
  height: 0
  x: 240
  y: 240
  originX: 0
  originY: 0
  scroll: false
  rotation: 90
  alpha: 1
  children: []
---
case: Test parsing container with anchor but no width or height
in:
  - state:
      id: outer-container
      type: container
      x: 0
      "y": 0
      children:
        - type: container
          id: inner-container
          x: 300
          "y": 100
          anchorX: 0.5
          anchorY: 1
          rotation: 0
          scaleX: 1
          scaleY: 1
          children:
            - type: rect
              id: reactid
              fill: red
              width: 100
              height: 100
              x: 0
              "y": 0
out:
  id: "outer-container"
  type: "container"
  direction: ""
  alpha: 1
  gap: 0
  height: 100
  originX: 0
  originY: 0
  rotation: 0
  scroll: false
  width: 350
  x: 0
  y: 0
  children:
    - id: inner-container
      type: container
      direction: ""
      height: 100
      width: 100
      x: 250
      y: 0
      originX: 50
      originY: 100
      scroll: false
      rotation: 0
      gap: 0
      alpha: 1
      children: 
        - id: "reactid"
          type: "rect"
          alpha: 1
          fill: red
          height: 100
          width: 100
          originX: 0
          originY: 0
          rotation: 0
          x: 0
          y: 0
---
case: Test parsing container with particles children
in:
  - state:
      id: 'container-particles'
      type: "container"
      direction: "horizontal"
      gap: 10
      width: 500
      height: 300
      children:
        - id: 'particles-burst'
          type: "particles"
          width: 200
          height: 150
          texture: "circle"
          behaviors:
            - type: "spawnShape"
              config:
                type: "circle"
                data:
                  x: 100
                  y: 75
                  radius: 10
                  affectRotation: true
            - type: "speedStatic"
              config:
                min: 200
                max: 400
            - type: "scale"
              config:
                list:
                  - value: 1
                    time: 0
                  - value: 0
                    time: 1
            - type: "alpha"
              config:
                list:
                  - value: 1
                    time: 0
                  - value: 0
                    time: 1
          emitter:
            lifetime:
              min: 0.5
              max: 1.0
            frequency: 0
            particlesPerWave: 50
            maxParticles: 50
            emitterLifetime: 0.1
        - id: 'rect-1'
          type: "rect"
          width: 100
          height: 100
          fill: "blue"
  - parserPlugins: []
out:
  id: "container-particles"
  type: "container"
  direction: "horizontal"
  alpha: 1
  gap: 10
  height: 300
  originX: 0
  originY: 0
  rotation: 0
  scroll: false
  width: 500
  x: 0
  y: 0
  children:
    - id: 'particles-burst'
      type: "particles"
      count: 50
      width: 200
      height: 150
      texture: "circle"
      behaviors:
        - type: "spawnShape"
          config:
            type: "circle"
            data:
              x: 100
              y: 75
              radius: 10
              affectRotation: true
        - type: "speedStatic"
          config:
            min: 200
            max: 400
        - type: "scale"
          config:
            list:
              - value: 1
                time: 0
              - value: 0
                time: 1
        - type: "alpha"
          config:
            list:
              - value: 1
                time: 0
              - value: 0
                time: 1
      emitter:
        lifetime:
          min: 0.5
          max: 1.0
        frequency: 0
        particlesPerWave: 50
        maxParticles: 50
        emitterLifetime: 0.1
      x: 0
      y: 0
      alpha: 1
    - id: "rect-1"
      type: "rect"
      alpha: 1
      fill: blue
      height: 100
      width: 100
      originX: 0
      originY: 0
      rotation: 0
      x: 210
      y: 0
---
case: Test parsing container with multiple particles
in:
  - state:
      id: 'container-multi-particles'
      type: "container"
      direction: "vertical"
      gap: 20
      width: 400
      height: 600
      children:
        - id: 'particles-snow'
          type: "particles"
          width: 400
          height: 200
          texture: "snowflake"
          behaviors:
            - type: "spawnShape"
              config:
                type: "rect"
                data:
                  x: 0
                  y: -20
                  w: 400
                  h: 10
            - type: "movePoint"
              config:
                speed:
                  min: 50
                  max: 150
                direction: 90
            - type: "scaleStatic"
              config:
                min: 0.3
                max: 1.0
            - type: "alpha"
              config:
                list:
                  - value: 0
                    time: 0
                  - value: 0.8
                    time: 0.1
                  - value: 0.8
                    time: 0.8
                  - value: 0
                    time: 1
            - type: "rotation"
              config:
                minStart: 0
                maxStart: 360
                minSpeed: -45
                maxSpeed: 45
          emitter:
            lifetime:
              min: 4
              max: 8
            frequency: 0.05
            particlesPerWave: 2
            maxParticles: 100
            emitterLifetime: -1
            spawnBounds:
              x: -50
              y: -50
              width: 500
              height: 300
            recycleOnBounds: true
        - id: 'particles-fire'
          type: "particles"
          width: 400
          height: 180
          texture: "circle"
          behaviors:
            - type: "spawnShape"
              config:
                type: "rect"
                data:
                  x: 200
                  y: 150
                  w: 40
                  h: 10
            - type: "acceleration"
              config:
                accel:
                  x: 0
                  y: -200
                minStart: 50
                maxStart: 150
                rotate: false
                maxSpeed: 0
            - type: "scale"
              config:
                list:
                  - value: 1
                    time: 0
                  - value: 0.3
                    time: 1
                minMult: 0.5
            - type: "alpha"
              config:
                list:
                  - value: 1
                    time: 0
                  - value: 0
                    time: 1
            - type: "color"
              config:
                list:
                  - value: "#ffff00"
                    time: 0
                  - value: "#ff6600"
                    time: 0.5
                  - value: "#ff0000"
                    time: 1
            - type: "rotationStatic"
              config:
                min: -90
                max: -90
          emitter:
            lifetime:
              min: 0.5
              max: 1.5
            frequency: 0.02
            particlesPerWave: 2
            maxParticles: 75
            emitterLifetime: -1
  - parserPlugins: []
out:
  id: "container-multi-particles"
  type: "container"
  direction: "vertical"
  alpha: 1
  gap: 20
  height: 600
  originX: 0
  originY: 0
  rotation: 0
  scroll: false
  width: 400
  x: 0
  y: 0
  children:
    - id: 'particles-snow'
      type: "particles"
      count: 100
      width: 400
      height: 200
      texture: "snowflake"
      behaviors:
        - type: "spawnShape"
          config:
            type: "rect"
            data:
              x: 0
              y: -20
              w: 400
              h: 10
        - type: "movePoint"
          config:
            speed:
              min: 50
              max: 150
            direction: 90
        - type: "scaleStatic"
          config:
            min: 0.3
            max: 1.0
        - type: "alpha"
          config:
            list:
              - value: 0
                time: 0
              - value: 0.8
                time: 0.1
              - value: 0.8
                time: 0.8
              - value: 0
                time: 1
        - type: "rotation"
          config:
            minStart: 0
            maxStart: 360
            minSpeed: -45
            maxSpeed: 45
      emitter:
        lifetime:
          min: 4
          max: 8
        frequency: 0.05
        particlesPerWave: 2
        maxParticles: 100
        emitterLifetime: -1
        spawnBounds:
          x: -50
          y: -50
          width: 500
          height: 300
        recycleOnBounds: true
      x: 0
      y: 0
      alpha: 1
    - id: 'particles-fire'
      type: "particles"
      count: 75
      width: 400
      height: 180
      texture: "circle"
      behaviors:
        - type: "spawnShape"
          config:
            type: "rect"
            data:
              x: 200
              y: 150
              w: 40
              h: 10
        - type: "acceleration"
          config:
            accel:
              x: 0
              y: -200
            minStart: 50
            maxStart: 150
            rotate: false
            maxSpeed: 0
        - type: "scale"
          config:
            list:
              - value: 1
                time: 0
              - value: 0.3
                time: 1
            minMult: 0.5
        - type: "alpha"
          config:
            list:
              - value: 1
                time: 0
              - value: 0
                time: 1
        - type: "color"
          config:
            list:
              - value: "#ffff00"
                time: 0
              - value: "#ff6600"
                time: 0.5
              - value: "#ff0000"
                time: 1
        - type: "rotationStatic"
          config:
            min: -90
            max: -90
      emitter:
        lifetime:
          min: 0.5
          max: 1.5
        frequency: 0.02
        particlesPerWave: 2
        maxParticles: 75
        emitterLifetime: -1
      x: 0
      y: 220
      alpha: 1
---
case: Test parsing container with hover, click, and rightClick events
in:
  - state:
      id: 'container-events'
      type: "container"
      direction: "horizontal"
      gap: 5
      x: 100
      y: 100
      hover:
        cursor: "pointer"
        soundSrc: "hover-sound"
        actionPayload:
          type: "hover"
      click:
        soundSrc: "click-sound"
        actionPayload:
          type: "click"
      rightClick:
        soundSrc: "rightclick-sound"
        actionPayload:
          type: "rightclick"
      children:
        - id: 'rect-1'
          type: "rect"
          width: 80
          height: 100
          fill: red
out:
  id: "container-events"
  type: "container"
  direction: "horizontal"
  gap: 5
  width: 80
  height: 100
  x: 100
  y: 100
  originX: 0
  originY: 0
  scroll: false
  rotation: 0
  alpha: 1
  hover:
    cursor: "pointer"
    soundSrc: "hover-sound"
    actionPayload:
      type: "hover"
  click:
    soundSrc: "click-sound"
    actionPayload:
      type: "click"
  rightClick:
    soundSrc: "rightclick-sound"
    actionPayload:
      type: "rightclick"
  children:
    - id: 'rect-1'
      type: "rect"
      width: 80
      height: 100
      x: 0
      y: 0
      originX: 0
      originY: 0
      fill: red
      rotation: 0
      alpha: 1
---
case: Test parsing container with children no scale
in: 
  - state:
      id: 'container-scaled-children'
      type: "container"
      direction: "horizontal"
      gap: 5
      x: 0
      y: 0
      scaleX: 2
      scaleY: 2
      children:
        - id: 'rect-1'
          type: "rect"
          width: 100
          height: 100
          fill: red
        - id: 'rect-2'
          type: "rect"
          width: 200
          height: 150
          fill: blue
out: 
  id: "container-scaled-children"
  type: "container"
  direction: "horizontal"
  gap: 5
  width: 605
  height: 300
  x: 0
  y: 0
  originX: 0
  originY: 0
  scroll: false
  rotation: 0
  alpha: 1
  children:
    - id: 'rect-1'
      type: "rect"
      width: 200
      height: 200
      x: 0
      y: 0
      originX: 0
      originY: 0
      fill: red
      rotation: 0
      alpha: 1
    - id: 'rect-2'
      type: "rect"
      width: 400
      height: 300
      x: 205
      y: 0
      originX: 0
      originY: 0
      fill: blue
      rotation: 0
      alpha: 1
---
case: Test parsing container with scaled children
in: 
  - state:
      id: 'container-scaled-children'
      type: "container"
      direction: "horizontal"
      gap: 5
      x: 0
      y: 0
      scaleX: 2
      scaleY: 2
      children:
        - id: 'rect-1'
          type: "rect"
          width: 100
          height: 100
          scaleX: 2
          scaleY: 2
          fill: red
        - id: 'rect-2'
          type: "rect"
          width: 200
          height: 150
          scaleX: 2
          scaleY: 2
          fill: blue
out: 
  id: "container-scaled-children"
  type: "container"
  direction: "horizontal"
  gap: 5
  width: 1205
  height: 600
  x: 0
  y: 0
  originX: 0
  originY: 0
  scroll: false
  rotation: 0
  alpha: 1
  children:
    - id: 'rect-1'
      type: "rect"
      width: 400
      height: 400
      x: 0
      y: 0
      originX: 0
      originY: 0
      fill: red
      rotation: 0
      alpha: 1
    - id: 'rect-2'
      type: "rect"
      width: 800
      height: 600
      x: 405
      y: 0
      originX: 0
      originY: 0
      fill: blue
      rotation: 0
      alpha: 1
---
case: Test parsing container with anchorToBottom enabled
in:
  - state:
      id: "container-anchor-bottom"
      type: "container"
      direction: "vertical"
      gap: 5
      width: 120
      height: 120
      x: 25
      y: 40
      scroll: true
      anchorToBottom: true
      children:
        - id: "rect-1"
          type: "rect"
          width: 80
          height: 50
          fill: red
out:
  id: "container-anchor-bottom"
  type: "container"
  direction: "vertical"
  gap: 5
  width: 120
  height: 120
  x: 25
  y: 40
  originX: 0
  originY: 0
  scroll: true
  anchorToBottom: true
  rotation: 0
  alpha: 1
  children:
    - id: "rect-1"
      type: "rect"
      width: 80
      height: 50
      x: 0
      y: 0
      originX: 0
      originY: 0
      fill: red
      rotation: 0
      alpha: 1
